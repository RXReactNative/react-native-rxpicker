{"version":3,"sources":["../../src/components/RXSinglePicker.js"],"names":["React","Component","PropTypes","RXPicker","RXSinglePicker","constructor","props","onChange","scrollIndex","targetItemIndex","resultIndex","onConfirm","list","length","console","warn","item","value","getValue","state","selectValue","valueKey","i","render","style","other","paddingBottom","propTypes","arrayOf","oneOfType","object","number","string","defaultProps"],"mappings":"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","file":"RXSinglePicker.js","sourcesContent":["/**\n * \n * \n * @flow\n */\n'use strict'\nimport React, {Component} from 'react';\nimport { } from 'react-native';\nimport PropTypes from 'prop-types';\n\nimport RXPicker from '../core/RXPicker';\n\nexport default class RXSinglePicker extends Component {\n  static propTypes = {\n    ...RXPicker.propTypes,\n    list: PropTypes.arrayOf(\n      PropTypes.oneOfType([\n        PropTypes.object,\n        PropTypes.number,\n        PropTypes.string,\n      ])\n    ),\n    selectValue: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n    ]),\n    valueKey: PropTypes.string,\n  }\n\n  static defaultProps = {\n    ...RXPicker.defaultProps,\n    list: [],\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.resultIndex = 0;\n\n    let value = this.getValue(props);\n    this.state = {\n      value,\n    }\n  }\n\n  getValue(props) {\n    let selectValue = props.selectValue;\n    let valueKey = props.valueKey;\n\n    const list = props.list || [];\n    if (!selectValue) return null;\n    if (typeof selectValue === 'string' || typeof selectValue === 'number') {\n      for (var i=0; i < list.length; i++) {\n        let item = list[i] || '';\n        if (item === selectValue) {\n          this.resultIndex = i || 0;\n          return [i];\n        }\n      }\n      return null;\n    }\n    else if (typeof selectValue === 'object' && valueKey) {\n      for (var i=0; i < list.length; i++) {\n        let item = list[i] || {};\n        let value = item[valueKey];\n        if (value === selectValue) {\n          this.resultIndex = i || 0;\n          return [i];\n        }\n      }\n      return null;\n    }\n  }\n\n  onChange = (scrollIndex=0, targetItemIndex=0) => {\n    const { onChange } = this.props;\n    // console.log('onChange=> scrollIndex='+scrollIndex+',,,targetItemIndex='+targetItemIndex);\n    this.resultIndex = targetItemIndex;\n    onChange && onChange(scrollIndex, targetItemIndex);\n  }\n\n  onConfirm = () => {\n    let { list, onConfirm } = this.props;\n    list = list || [];\n    if (this.resultIndex > list.length) {\n      console.warn('YLSinglePicker 数组越界');\n      return;\n    }\n    // console.log('this.resultIndex='+this.resultIndex);\n    let item = list[this.resultIndex] || '';\n    onConfirm && onConfirm(item);\n  }\n\n  render() {\n    const { style, list, ...other } = this.props;\n    const { value } = this.state;\n    return <RXPicker \n            {...other}\n            style={ [{paddingBottom: 20}, style] }\n\n            // 数据源\n            list={ [ list ] }\n\n            // 选中的\n            value={value}\n            \n            // 分区比例，注意和list数据源长度保持一致 (如果一致的，可以不写)\n            // proportion={ [1, 1, 1] }\n            // 选中项距离顶部的偏移个数\n            offsetCount={ 2 }\n            onChange={this.onChange}\n            onConfirm={this.onConfirm}\n          />\n  }\n}"]}