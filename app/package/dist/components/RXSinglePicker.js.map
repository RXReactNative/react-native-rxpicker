{"version":3,"sources":["../../src/components/RXSinglePicker.js"],"names":["React","Component","PropTypes","RXPicker","RXSinglePicker","constructor","props","onChange","scrollIndex","targetItemIndex","resultIndex","onConfirm","list","length","console","warn","item","value","getValue","state","selectValue","valueKey","i","render","style","other","paddingBottom","propTypes","arrayOf","oneOfType","object","number","string","defaultProps"],"mappings":"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","file":"RXSinglePicker.js","sourcesContent":["/**\r\n * \r\n * \r\n * @flow\r\n */\r\n'use strict'\r\nimport React, {Component} from 'react';\r\nimport { } from 'react-native';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport RXPicker from '../core/RXPicker';\r\n\r\nexport default class RXSinglePicker extends Component {\r\n  static propTypes = {\r\n    ...RXPicker.propTypes,\r\n    list: PropTypes.arrayOf(\r\n      PropTypes.oneOfType([\r\n        PropTypes.object,\r\n        PropTypes.number,\r\n        PropTypes.string,\r\n      ])\r\n    ),\r\n    selectValue: PropTypes.oneOfType([\r\n      PropTypes.number,\r\n      PropTypes.string,\r\n    ]),\r\n    valueKey: PropTypes.string,\r\n  }\r\n\r\n  static defaultProps = {\r\n    ...RXPicker.defaultProps,\r\n    list: [],\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.resultIndex = 0;\r\n\r\n    let value = this.getValue(props);\r\n    this.state = {\r\n      value,\r\n    }\r\n  }\r\n\r\n  getValue(props) {\r\n    let selectValue = props.selectValue;\r\n    let valueKey = props.valueKey;\r\n\r\n    const list = props.list || [];\r\n    if (!selectValue) {\r\n      return null;\r\n    }\r\n    if (typeof selectValue === 'string' || typeof selectValue === 'number') {\r\n      for (var i = 0; i < list.length; i++) {\r\n        let item = list[i] || '';\r\n        if (item === selectValue) {\r\n          this.resultIndex = i || 0;\r\n          return [i];\r\n        }\r\n      }\r\n      return null;\r\n    }\r\n    else if (typeof selectValue === 'object' && valueKey) {\r\n      for (var i = 0; i < list.length; i++) {\r\n        let item = list[i] || {};\r\n        let value = item[valueKey];\r\n        if (value === selectValue) {\r\n          this.resultIndex = i || 0;\r\n          return [i];\r\n        }\r\n      }\r\n      return null;\r\n    }\r\n  }\r\n\r\n  onChange = (scrollIndex = 0, targetItemIndex = 0) => {\r\n    const { onChange } = this.props;\r\n    // console.log('onChange=> scrollIndex='+scrollIndex+',,,targetItemIndex='+targetItemIndex);\r\n    this.resultIndex = targetItemIndex;\r\n    onChange && onChange(scrollIndex, targetItemIndex);\r\n  }\r\n\r\n  onConfirm = () => {\r\n    let { list, onConfirm } = this.props;\r\n    list = list || [];\r\n    if (this.resultIndex > list.length) {\r\n      console.warn('YLSinglePicker 数组越界');\r\n      return;\r\n    }\r\n    // console.log('this.resultIndex='+this.resultIndex);\r\n    let item = list[this.resultIndex] || '';\r\n    onConfirm && onConfirm(item);\r\n  }\r\n\r\n  render() {\r\n    const { style, list, ...other } = this.props;\r\n    const { value } = this.state;\r\n    return <RXPicker \r\n            {...other}\r\n            style={ [{paddingBottom: 20}, style] }\r\n\r\n            // 数据源\r\n            list={ [ list ] }\r\n\r\n            // 选中的\r\n            value={value}\r\n            \r\n            // 分区比例，注意和list数据源长度保持一致 (如果一致的，可以不写)\r\n            // proportion={ [1, 1, 1] }\r\n            // 选中项距离顶部的偏移个数\r\n            offsetCount={ 2 }\r\n            onChange={this.onChange}\r\n            onConfirm={this.onConfirm}\r\n          />\r\n  }\r\n}"]}