{"version":3,"sources":["../../src/components/RXSinglePicker.js"],"names":["React","Component","PropTypes","RXPicker","RXSinglePicker","constructor","props","onChange","scrollIndex","targetItemIndex","resultIndex","onConfirm","list","length","console","warn","item","getValue","selectValue","valueKey","i","value","render","style","other","paddingBottom","propTypes","arrayOf","oneOfType","object","number","string","defaultProps"],"mappings":"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","file":"RXSinglePicker.js","sourcesContent":["/**\n *\n *\n * @flow\n */\n'use strict'\nimport React, { Component } from 'react';\nimport { } from 'react-native';\nimport PropTypes from 'prop-types';\n\nimport RXPicker from '../core/RXPicker';\n\nexport default class RXSinglePicker extends Component {\n  static propTypes = {\n    ...RXPicker.propTypes,\n    list: PropTypes.arrayOf(\n      PropTypes.oneOfType([\n        PropTypes.object,\n        PropTypes.number,\n        PropTypes.string,\n      ])\n    ),\n    selectValue: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n    ]),\n    valueKey: PropTypes.string,\n  }\n\n  static defaultProps = {\n    ...RXPicker.defaultProps,\n    list: [],\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.resultIndex = 0;\n  }\n\n\n  getValue() {\n    const props = this.props || {}\n    const selectValue = props.selectValue;\n    const valueKey = props.valueKey;\n\n    const list = props.list || [];\n    if (!selectValue) {\n      return null;\n    }\n    if (typeof selectValue === 'string' || typeof selectValue === 'number') {\n      for (let i = 0; i < list.length; i++) {\n        const item = list[i] || '';\n        if (item === selectValue) {\n          this.resultIndex = i || 0;\n          return [i];\n        }\n      }\n      return null;\n    }\n    else if (typeof selectValue === 'object' && valueKey) {\n      for (let i = 0; i < list.length; i++) {\n        const item = list[i] || {};\n        const value = item[valueKey];\n        if (value === selectValue) {\n          this.resultIndex = i || 0;\n          return [i];\n        }\n      }\n      return null;\n    }\n  }\n\n  onChange = (scrollIndex = 0, targetItemIndex = 0) => {\n    const { onChange } = this.props;\n    // console.log('onChange=> scrollIndex='+scrollIndex+',,,targetItemIndex='+targetItemIndex);\n    this.resultIndex = targetItemIndex;\n    onChange && onChange(scrollIndex, targetItemIndex);\n  }\n\n  onConfirm = () => {\n    let { list, onConfirm } = this.props;\n    list = list || [];\n    if (this.resultIndex > list.length) {\n      console.warn('RXSinglePicker 数组越界');\n      return;\n    }\n    // console.log('this.resultIndex='+this.resultIndex);\n    const item = list[this.resultIndex] || '';\n    onConfirm && onConfirm(item);\n  }\n\n  render() {\n    const { style, list, ...other } = this.props;\n    const value = this.getValue()\n    return <RXPicker\n      {...other}\n      style={[{ paddingBottom: 20 }, style]}\n\n      // 数据源\n      list={[list]}\n\n      // 选中的\n      value={value}\n\n      // 分区比例，注意和list数据源长度保持一致 (如果一致的，可以不写)\n      // proportion={ [1, 1, 1] }\n      // 选中项距离顶部的偏移个数\n      offsetCount={2}\n      onChange={this.onChange}\n      onConfirm={this.onConfirm}\n    />\n  }\n}"]}