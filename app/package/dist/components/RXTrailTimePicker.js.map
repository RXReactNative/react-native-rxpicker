{"version":3,"sources":["../../src/components/RXTrailTimePicker.js"],"names":["React","Component","PropTypes","RXDateUtil","RXPicker","RXConfigArray","RXIsLeapYear","RXConvert2Digit","RXTrailTimePicker","constructor","props","yearArray","monthArray","dayArray","hourArray","yearSelectIndex","monthSelectIndex","daySelectIndex","hourSelectIndex","lastHour","preDay","lastYear","lastMonth","lastDay","initialize","state","selectMap","limitDay","nowDate","getNextDate","nowDateMap","formatDateMap","month","day","yearShow","selectDate","selectValues","selectDateMap","selectYear","year","selectMonth","selectDay","selectHour","hour","selectMothMap","getSelectMonth","array","selectIndex","selectDayMap","getSelectDays","selectHourMap","getSelectHour","Date","restoreNum","preMonth","dayNum","getDay","nowDay","index","MaxCount","i","dateString","getWeek","push","numString","split","parseInt","isNaN","render","title","other","length","list","value","proportion","paddingBottom","onChange","onConfirm","propTypes","object","number","defaultProps","date","getFullYear","setFullYear","week","weekString","weekStringArray","tempHour","maxHour","hourString","scrollIndex","targetItemIndex","tempMonthArray","tempMonthSelectIndex","tempDayArray","tempDaySelectIndex","tempHourArray","tempHourSelectIndex","setState","currentDate","setHours"],"mappings":"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","file":"RXTrailTimePicker.js","sourcesContent":["/**\n * \n * \n * @flow\n */\n'use strict'\nimport React, {Component} from 'react';\nimport { } from 'react-native';\nimport PropTypes from 'prop-types';\n\nimport RXDateUtil from '../utils/RXDateUtil';\nimport RXPicker from '../core/RXPicker';\nimport {RXConfigArray, RXIsLeapYear, RXConvert2Digit} from '../utils/RXUtils';\n\nexport default class RXTrailTimePicker extends Component {\n  static propTypes = {\n    ...RXPicker.propTypes,\n    selectValues: PropTypes.object,\n    limitDay: PropTypes.number,\n  }\n\n  static defaultProps = {\n    ...RXPicker.defaultProps,\n    limitDay: 7,\n  }\n\n  constructor(props) {\n    super(props);\n    const { \n      yearArray , monthArray, dayArray, hourArray,\n      yearSelectIndex, monthSelectIndex, daySelectIndex, hourSelectIndex,\n      lastHour,\n      preDay, lastYear, lastMonth, lastDay \n    } = this.initialize(props);\n\n    this.state = {\n      yearArray , monthArray, dayArray, hourArray,\n      yearSelectIndex, monthSelectIndex, daySelectIndex, hourSelectIndex,\n    };\n    this.selectMap = RXConfigArray(6);\n  }\n\n  initialize(props) {\n    let limitDay = props.limitDay || 7;\n    let nowDate = RXDateUtil.getNextDate(0,0);\n    let nowDateMap = RXDateUtil.formatDateMap(nowDate);\n    let month = nowDateMap.month, day = nowDateMap.day;\n    var yearShow = false;\n    var preDay = 0;\n    if (month === 1 && day < limitDay) {\n      yearShow = true;\n      preDay = limitDay - day;\n    }\n\n    let selectDate = props.selectValues || RXDateUtil.getNextDate();\n    let selectDateMap = RXDateUtil.formatDateMap(selectDate);\n    let selectYear = selectDateMap.year;\n    let selectMonth = selectDateMap.month;\n    let selectDay = selectDateMap.day;\n    let selectHour = selectDateMap.hour;\n\n    this.preDay = preDay;\n    this.lastYear = nowDateMap.year;   // 年\n    this.lastMonth = month; // 月\n    this.lastDay = day;     // 日\n    this.lastHour = nowDateMap.hour;   // 小时\n\n    var yearArray = [];\n    var yearSelectIndex = 0;\n    if (yearShow) {\n      yearArray = [(nowDateMap.year - 1) + ' 年', nowDateMap.year + ' 年'];\n      if (nowDateMap.year === selectYear) {\n        yearSelectIndex = 1;\n      }\n    }\n    \n    let selectMothMap = this.getSelectMonth(selectYear, selectMonth);\n    let monthArray = selectMothMap.array || [];\n    let monthSelectIndex = selectMothMap.selectIndex || 0;\n\n    let selectDayMap = this.getSelectDays(selectYear, selectMonth, selectDay);\n    let dayArray = selectDayMap.array || [];\n    let daySelectIndex = selectDayMap.selectIndex || 0;\n\n    let selectHourMap = this.getSelectHour(selectYear, selectMonth, selectDay, selectHour);\n    let hourArray = selectHourMap.array || [];\n    let hourSelectIndex = selectHourMap.selectIndex || 0;\n\n    return { \n      yearArray , monthArray, dayArray, hourArray,\n      yearSelectIndex, monthSelectIndex, daySelectIndex, hourSelectIndex,\n      lastHour: selectHour,\n      preDay, lastYear: nowDate.year, lastMonth: month, lastDay: day,\n    };\n  }\n\n  getSelectMonth(year=0, selectMonth=0) {\n    let nowDate = new Date();\n    let nowDateMap = RXDateUtil.formatDateMap(nowDate);\n    if (!year) {\n      year = nowDateMap.year;\n    }\n    else {\n      year = this.restoreNum(year);\n    }\n    var selectIndex = 0;\n    if (this.lastYear > year) {\n      let preMonth = '12 月';\n      return {array: [preMonth], selectIndex};\n    }\n    else {\n      let lastMonth = nowDateMap.month + ' 月';\n      return { array:[lastMonth], selectIndex };\n    }\n  }\n\n  getSelectDays(year=0, month=0, selectDay=0) {\n    let { limitDay } = this.props;\n    limitDay = limitDay || 1;\n    month = this.restoreNum(month);\n\n    let nowDate = new Date();\n    let nowDateMap = RXDateUtil.formatDateMap(nowDate);\n    if (!year) {\n      year = nowDateMap.year;\n    }\n    else {\n      year = this.restoreNum(year);\n    }\n\n    let dayNum = this.getDay(year, month);\n\n    let nowDay = nowDateMap.day;\n    var index = 0;\n    var MaxCount = limitDay;\n    if ( year === nowDateMap.year && month === nowDateMap.month) {\n      if (nowDay > limitDay - 1) {\n        index = nowDay - limitDay + 1;\n      }\n      else {\n        MaxCount = nowDay;\n        index = 1;\n      }\n    }\n    else {\n      MaxCount = limitDay - nowDay + 1;\n      index = dayNum - MaxCount;\n    }\n\n    var selectIndex = 0;\n\n    var array = [];\n    for (let i = 0; i<MaxCount; i++) {\n      let day = index + i;\n      if (day === selectDay) selectIndex = i;\n      let dateString = day + ' 日 ' + this.getWeek(year, month, day);\n      if (dateString === selectDay) selectIndex = i;\n      array.push(dateString);\n    };\n    return { array, selectIndex };\n  }\n\n  getDay(year, month) {\n    let dayNum = 0;\n    switch (month) {\n      case 1:\n      case 3:\n      case 5:\n      case 7:\n      case 8:\n      case 10:\n      case 12:\n        dayNum = 31;\n        break;\n      case 4:\n      case 6:\n      case 9:\n      case 11:\n        dayNum = 30;\n        break;\n      case 2:\n        dayNum = RXIsLeapYear(year) ? 29 : 28;\n        break;\n      default:\n        dayNum = 0;\n    }\n    return dayNum;\n  }\n\n  getWeek = (year, month, day) => {\n    if (typeof month === 'string') {\n      month = month.split(' ')[0] || month;\n    }\n    let date = new Date();\n    if (!year) {\n      year = date.getFullYear();\n    }\n    else {\n      year = this.restoreNum(year);\n    }\n    date.setFullYear(year, month - 1, day);\n    let week = date.getDay();\n    let weekString = RXDateUtil.weekStringArray()[week] || week;\n    return weekString;\n  }\n\n  getSelectHour = (year=0, month=0, day=0, selectHour=0) => {\n    month = this.restoreNum(month);\n    day = this.restoreNum(day);\n    if (typeof selectHour === 'string') {\n      let tempHour = selectHour.split(':') || [selectHour];\n      tempHour = parseInt(tempHour);\n      if (isNaN(tempHour)) tempHour = 0;\n      selectHour = tempHour;\n    }\n    \n    let nowDate = new Date();\n    let nowDateMap = RXDateUtil.formatDateMap(nowDate);\n    let maxHour = 24;\n    if (!year) year=nowDateMap.year;\n    if (\n      year === nowDateMap.year && \n      month === nowDateMap.month && \n      day === nowDateMap.day\n    ) {\n      maxHour = nowDateMap.hour;\n    }\n    var array = [];\n    var selectIndex = selectHour > maxHour ? maxHour : 0;\n    for (let i=0; i<= maxHour; i++) {\n      if (i === selectHour) selectIndex = i;\n      let hourString = RXConvert2Digit(i) + ':00';\n      array.push(hourString);\n    }\n    return { array, selectIndex };\n  }\n\n  restoreNum(numString) {\n    if (typeof numString === 'string') {\n      numString = numString.split(' ')[0] || numString;\n      numString = parseInt(numString);\n      if (isNaN(numString)) {\n        numString = 0;\n      }\n    }\n    return numString;\n  }\n\n  onChange = (scrollIndex=0, targetItemIndex=0) => {\n    const { onChange } = this.props;\n    const {\n      yearArray, monthArray, dayArray, hourArray,\n      yearSelectIndex, monthSelectIndex, daySelectIndex, hourSelectIndex,\n    } = this.state;\n    let yearShow = yearArray.length;\n    if (yearShow && scrollIndex === 0) {\n      // 年份\n      let selectYear = yearArray[targetItemIndex];\n\n      let selectMothMap = this.getSelectMonth(selectYear);\n      let tempMonthArray = selectMothMap.array || [];\n      let tempMonthSelectIndex = selectMothMap.selectIndex || 0;\n      let selectMonth = tempMonthArray[tempMonthSelectIndex];\n\n      let selectDay = dayArray[daySelectIndex];\n      let selectDayMap = this.getSelectDays(selectYear, selectMonth, selectDay);\n      let tempDayArray = selectDayMap.array || [];\n      let tempDaySelectIndex = selectDayMap.selectIndex || 0;\n\n      let selectHour = hourArray[hourSelectIndex];\n      let selectHourMap = this.getSelectHour(selectYear, selectMonth, selectDay, selectHour);\n      let tempHourArray = selectHourMap.array || [];\n      let tempHourSelectIndex = selectHourMap.selectIndex || 0;\n      this.setState({ \n        yearSelectIndex: targetItemIndex,\n        monthArray: tempMonthArray, monthSelectIndex: tempMonthSelectIndex,\n        dayArray: tempDayArray, daySelectIndex: tempDaySelectIndex,\n        hourArray: tempHourArray, hourSelectIndex: tempHourSelectIndex,\n      })\n    }\n    else if ((yearShow && scrollIndex === 1) ||\n        (!yearShow && scrollIndex === 0)\n      ) {\n      // 月份\n      var selectYear = (new Date()).getFullYear();\n      if (yearShow) {\n        selectYear = yearArray[yearSelectIndex];\n      }\n      let selectMonth = monthArray[targetItemIndex];\n\n      let selectDay = dayArray[daySelectIndex];\n      let selectDayMap = this.getSelectDays(selectYear, selectMonth, selectDay);\n      let tempDayArray = selectDayMap.array || [];\n      let tempDaySelectIndex = selectDayMap.selectIndex || 0;\n\n      let selectHour = hourArray[hourSelectIndex];\n      let selectHourMap = this.getSelectHour(selectYear, selectMonth, selectDay, selectHour);\n      let tempHourArray = selectHourMap.array || [];\n      let tempHourSelectIndex = selectHourMap.selectIndex || 0;\n      this.setState({ \n        monthSelectIndex: targetItemIndex,\n        dayArray: tempDayArray, daySelectIndex: tempDaySelectIndex,\n        hourArray: tempHourArray, hourSelectIndex: tempHourSelectIndex,\n      })\n    }\n    else if ((yearShow && scrollIndex === 2) ||\n          (!yearShow && scrollIndex === 1)\n      ){\n      // 日\n      var selectYear = (new Date()).getFullYear();\n      if (yearShow) {\n        selectYear = yearArray[yearSelectIndex];\n      }\n      let selectMonth = monthArray[monthSelectIndex];\n\n      let selectDay = dayArray[targetItemIndex];\n\n      let selectHour = hourArray[hourSelectIndex];\n      let selectHourMap = this.getSelectHour(selectYear, selectMonth, selectDay, selectHour);\n      let tempHourArray = selectHourMap.array || [];\n      let tempHourSelectIndex = selectHourMap.selectIndex || 0;\n      this.setState({ \n        daySelectIndex: targetItemIndex,\n        hourArray: tempHourArray, hourSelectIndex: tempHourSelectIndex,\n      })\n    }\n    else if ((yearShow && scrollIndex === 3) ||\n          (!yearShow && scrollIndex === 2)\n      ){\n      // 小时\n      this.setState({ \n        hourSelectIndex: targetItemIndex,\n      })\n    }\n  }\n\n  onConfirm = () => {\n    const { onConfirm } = this.props;\n    const {\n      yearArray, monthArray, dayArray, hourArray,\n      yearSelectIndex, monthSelectIndex, daySelectIndex, hourSelectIndex,\n    } = this.state;\n    let currentDate = new Date();\n    let yearShow = yearArray.length;\n    var year = currentDate.getFullYear();\n    if (yearShow) {\n      year = this.restoreNum(yearArray[yearSelectIndex]) || year;\n    }\n\n    let month = this.restoreNum(monthArray[monthSelectIndex]) || 2;\n    let day = this.restoreNum(dayArray[daySelectIndex]) || 1;\n\n    let hourString = hourArray[hourSelectIndex] || '12:00';\n    let hour = hourString.split(':')[0] || 0;\n    currentDate.setFullYear(year, month - 1, day);\n    currentDate.setHours(hour, 0, 0, 0);\n    onConfirm && onConfirm(currentDate);\n  }\n\n  render() {\n    const { title, ...other } = this.props;\n    const {\n      yearArray , monthArray, dayArray, hourArray,\n      yearSelectIndex, monthSelectIndex, daySelectIndex, hourSelectIndex,\n    } = this.state;\n    let yearShow = yearArray.length;\n\n    let list = yearShow ?\n                [yearArray, monthArray, dayArray, hourArray]\n              : [monthArray, dayArray, hourArray];\n\n    let value = yearShow ?\n                  [yearSelectIndex, monthSelectIndex, daySelectIndex, hourSelectIndex]\n               :  [monthSelectIndex, daySelectIndex, hourSelectIndex];\n    let proportion = yearShow ? [0.5, 0.5, 2, 0,5] : [0.5, 2, 0,5];\n    return <RXPicker \n            {...other}\n            style={ {paddingBottom: 20} }\n            title={ title }\n            // 数据源\n            list={list}\n\n            // 选中的\n            value={value}\n\n            // 分区比例，注意和list数据源长度保持一致\n            proportion={ proportion}\n\n            // 选中项距离顶部的偏移个数\n            offsetCount={ 2 }\n            onChange={this.onChange}\n            onConfirm={this.onConfirm}\n          />\n  }\n}"]}